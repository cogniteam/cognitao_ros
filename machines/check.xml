<machine name="testBT" type="bt">
	<loop name="Main mission loop" variable="1">
		<sequencer name="Navigator">
			<selector name="Drive To Goal">
				<parallel name="Follow Path">
					<task name="Preserve speed" param_tm="3.0"
						param_x="$current_goal_x" param_z="3.0"
						description="$CurrentVelocity: 2.3 m/s" />
					<task name="Preserve heading" description="$Heading: 130 deg" />
				</parallel>
				<task name="Recovery" description="Not a critical test"
					runner="local" action="wait" param_time="3.0" />
			</selector>
			<task name="Generate Random"
				description="generate a random 1-10" runner="local"
				action="generateRandom" param_random="$random" />
			<wait name="wait" value="3" />
			<task name="Wait random" description="wait for $random seconds"
				runner="local" action="waitRandom" param_random="$random" />
			<!-- <task name="Loop 10 times" description="loop 10" runner="local" action="loop10" 
				param_loop="$loop"/> -->
			<set name="Setting Goal Distance" variable="Distance" value="1" />
			<condition name="Goal reached?" expression="Distance &lt; 2" />
			<trigger name="trigger distance" start_condition="Distance = 1" stop_condition="Distance > 2">
				<sequencer name="Search for beacon">
					<wait name="wait" value="3" />
					<set name="found docking" variable="Distance" value="3" />
					<wait name="wait" value="5" />
				</sequencer>
			</trigger>								
					<set name="Setting Goal Distance" variable="Distance" value="4" />
			<wait name="wait" description="wait for power" value="3" />
			<sequencer name="Follow Path">
			<task name="Report1" runner="ros1_runner" action="wait"
				param_time="40.0" />
			<task name="Report2" runner="ros1_runner" action="wait"
				param_time="40.0" />
			</sequencer>
		</sequencer>
		
	</loop>
</machine>
